const translations = {
    en: {
        about: "About Us",
        aid: "Humanitarian Aid",
        support: "Support for Refugees",
        involved: "Get Involved",
        news: "News & Events",
        missionTitle: "Our Mission",
        missionText: "The Utah Ukrainian Association is a nonprofit uniting Utah's Ukrainian community to support Ukraine and help newcomers adapt to life in the U.S. We provide housing, job, and education assistance, organize cultural events, and collaborate on humanitarian missions.",
        missionText2: "Join us in fostering unity and sharing Ukrainian culture!",
        aidTitle: "Humanitarian Aid",
        aidText: "Test",
        supportTitle: "Support for Refugees",
        service1: "Housing",
        service2: "Driver's license",
        service3: "Resume and Job",
        service4: "Training and Studying",
        service5: "English language",
        details: "Details",
        volunteer: "Volunteer",
        volunteerText: "Join our team and make a difference.",
        partner: "Become a Partner",
        partnerText: "Collaborate with us to create impact.",
        stayInformed: "Stay Informed",
        stayInformedText: "Get the latest updates and news.",
        learnMore: "Learn More",
        aboutUs: "About Us",
        missionLink: "Our Mission",
        teamLink: "Our Team",
        careersLink: "Careers",
        ourWork: "Our Work",
        crisisLink: "Crisis Response",
        educationLink: "Education",
        healthLink: "Health",
        getInvolvedFooter: "Get Involved",
        donateLink: "Donate",
        volunteerLink: "Volunteer",
        partnerLink: "Partner",
        followUs: "Follow Us",
        howWeHelp: "How We Help",
        reportsLink: "Reports & Results",
        housingLink: "Housing",
        licenseLink: "Driver’s License",
        employmentLink: "Employment & Career",
        languageLink: "English Language",
        wellnessLink: "Youth Wellness Program",
        assistanceLink: "How to Get Assistance",
        newsletterLink: "Sign up for Newsletter",
        eventsLink: "Upcoming Events",
        blogLink: "Blog",
        contactLink: "Contact Us",
    },
    uk: {
        about: "Про нас",
        aid: "Гуманітарна допомога",
        support: "Підтримка біженців",
        involved: "Долучитися",
        news: "Новини та події",
        missionTitle: "Наша місія",
        missionText: "Асоціація українців Юти — це неприбуткова організація, яка об'єднує українську громаду Юти для підтримки України та допомоги новоприбулим адаптуватися до життя в США. Ми надаємо житло, допомогу в працевлаштуванні та освіті, організовуємо культурні заходи та співпрацюємо в гуманітарних місіях.",
        missionText2: "Приєднуйтесь до нас у зміцненні єдності та поширенні української культури!",
        aidTitle: "Гуманітарна допомога",
        aidText: "Тест",
        supportTitle: "Підтримка біженців",
        service1: "Житло",
        service2: "Водійські права",
        service3: "Резюме та Робота",
        service4: "Навчання",
        service5: "Англійська мова",
        details: "Детальніше",
        volunteer: "Волонтер",
        volunteerText: "Приєднуйтесь до нашої команди.",
        partner: "Стати партнером",
        partnerText: "Співпрацюйте з нами.",
        stayInformed: "Будьте в курсі",
        stayInformedText: "Отримуйте останні новини.",
        learnMore: "Дізнатися більше",
        aboutUs: "Про нас",
        missionLink: "Наша місія",
        teamLink: "Наша команда",
        careersLink: "Кар’єра",
        ourWork: "Наша робота",
        crisisLink: "Реагування на кризи",
        educationLink: "Освіта",
        healthLink: "Здоров’я",
        getInvolvedFooter: "Долучитися",
        donateLink: "Пожертвувати",
        volunteerLink: "Волонтер",
        partnerLink: "Партнер",
        followUs: "Слідкуйте за нами",
        howWeHelp: "Як ми допомагаємо",
        reportsLink: "Звіти та результати",
        housingLink: "Житло",
        licenseLink: "Посвідчення водія",
        employmentLink: "Робота та кар’єра",
        languageLink: "Англійська мова",
        wellnessLink: "Програма для молоді",
        assistanceLink: "Як отримати допомогу",
        newsletterLink: "Підписатися на розсилку",
        eventsLink: "Майбутні події",
        blogLink: "Блог",
        contactLink: "Наші контакти",
    },
    ru: {
        about: "О нас",
        aid: "Гуманитарная помощь",
        support: "Поддержка беженцев",
        involved: "Присоединиться",
        news: "Новости и события",
        missionTitle: "Наша миссия",
        missionText: "Ассоциация украинцев Юты — некоммерческая организация, объединяющая украинское сообщество Юты для поддержки Украины и помощи новоприбывшим адаптироваться к жизни в США. Мы предоставляем жилье, помощь в трудоустройстве и образовании, а так же сотрудничаем в гуманитарных миссиях.",
        missionText2: "Присоединяйтесь к нам в укреплении единства и распространении украинской культуры!",
        aidTitle: "Гуманитарная помощь",
        aidText: "Тест",
        supportTitle: "Поддержка беженцев",
        service1: "Проживание",
        service2: "Водительское удостоверение",
        service3: "Резюме и Работа",
        service4: "Обучение",
        service5: "Английский язык",
        details: "Подробнее",
        volunteer: "Волонтер",
        volunteerText: "Присоединяйтесь к нашей команде.",
        partner: "Стать партнером",
        partnerText: "Сотрудничайте с нами.",
        stayInformed: "Будьте в курсе",
        stayInformedText: "Получайте последние новости.",
        learnMore: "Узнать больше",
        aboutUs: "О нас",
        missionLink: "Наша миссия",
        teamLink: "Наша команда",
        careersLink: "Карьера",
        ourWork: "Наша работа",
        crisisLink: "Реагирование на кризисы",
        educationLink: "Образование",
        healthLink: "Здоровье",
        getInvolvedFooter: "Присоединиться",
        donateLink: "Пожертвовать",
        volunteerLink: "Волонтерство",
        partnerLink: "Партнерство",
        followUs: "Следите за нами",
        howWeHelp: "Как мы помогаем",
        reportsLink: "Отчеты и результаты",
        housingLink: "Жилье",
        licenseLink: "Водительские права",
        employmentLink: "Работа и карьера",
        languageLink: "Английский язык",
        wellnessLink: "Программа для молодежи",
        assistanceLink: "Как получить помощь",
        newsletterLink: "Подписаться на рассылку",
        eventsLink: "Предстоящие события",
        blogLink: "Блог",
        contactLink: "Наши контакты",
    },
};

const languageSwitcher = document.querySelector(".language-switcher");
const currentLangButton = languageSwitcher.querySelector("button");
const langList = languageSwitcher.querySelector("ul");

const menuItems = document.querySelectorAll("nav ul li");
const overlay = document.getElementById("overlay");

let currentLang = "en";

function updateTexts(lang) {
    document.querySelectorAll("[data-lang]").forEach((element) => {
        const key = element.getAttribute("data-lang");
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    currentLangButton.textContent = lang.toUpperCase();
}

langList.querySelectorAll("li").forEach((item) => {
    item.addEventListener("click", () => {
        const lang = item.getAttribute("data-lang");
        currentLang = lang;
        updateTexts(lang);
    });
});

// Initialize with English
updateTexts(currentLang);

// Затемнение фона при наведении на пункты меню (для ПК)
menuItems.forEach((item) => {
    item.addEventListener("mouseenter", () => {
        overlay.classList.add("active");
    });

    item.addEventListener("mouseleave", () => {
        overlay.classList.remove("active");
    });
});

// Функция для проверки видимости элемента
function isElementInViewport(el) {
    const rect = el.getBoundingClientRect();
    return (
        rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.bottom >= 0 &&
        rect.left <= (window.innerWidth || document.documentElement.clientWidth) &&
        rect.right >= 0
    );
}

// Функция для обработки прокрутки страницы
function handleScroll() {
    const aidImage = document.querySelector('.aid img');
    const supportImage = document.querySelector('.support img');

    if (isElementInViewport(aidImage)) {
        aidImage.classList.add('slide-in');
    }

    if (isElementInViewport(supportImage)) {
        supportImage.classList.add('slide-in');
    }
}

// Добавляем обработчик события прокрутки
window.addEventListener('scroll', handleScroll);

// Вызываем handleScroll при загрузке страницы, чтобы проверить видимость элементов
window.addEventListener('load', handleScroll);

const mobileMenu = document.getElementById("mobile-menu");
const navMenu = document.getElementById("nav-menu");

// Функция для переключения меню и затемнения фона (для мобильных устройств)
function toggleMenu() {
    navMenu.classList.toggle("active");

    // Затемнение фона при открытии меню (для мобильных устройств)
    if (navMenu.classList.contains("active")) {
        overlay.classList.add("active");
    } else {
        overlay.classList.remove("active");
    }
}

// Добавляем обработчик события на кнопку-бургер
mobileMenu.addEventListener("click", toggleMenu);

// Закрываем меню и убираем затемнение при клике вне его области
document.addEventListener("click", (event) => {
    if (!navMenu.contains(event.target) && !mobileMenu.contains(event.target)) {
        navMenu.classList.remove("active"); // Закрываем меню
        overlay.classList.remove("active"); // Убираем затемнение
    }
});

// Mobile Events Slider
function initMobileEventSlider() {
    const eventList = document.querySelector(".event-list");
    const events = document.querySelectorAll(".event");

    if (!eventList || events.length <= 1) return;

    let currentIndex = 0;

    // Wrap in slider container
    const sliderWrapper = document.createElement("div");
    sliderWrapper.classList.add("event-slider-wrapper");

    const prevBtn = document.createElement("button");
    prevBtn.textContent = "←";
    prevBtn.className = "event-slider-btn prev";

    const nextBtn = document.createElement("button");
    nextBtn.textContent = "→";
    nextBtn.className = "event-slider-btn next";

    const sliderViewport = document.createElement("div");
    sliderViewport.classList.add("event-slider-viewport");
    sliderViewport.appendChild(eventList);

    sliderWrapper.appendChild(prevBtn);
    sliderWrapper.appendChild(sliderViewport);
    sliderWrapper.appendChild(nextBtn);

    eventList.parentNode.insertBefore(sliderWrapper, eventList);

    function updateSlider() {
        const offset = -currentIndex * 100;
        eventList.style.transform = `translateX(${offset}%)`;
    }

    prevBtn.addEventListener("click", () => {
        if (currentIndex > 0) {
            currentIndex--;
            updateSlider();
        }
    });

    nextBtn.addEventListener("click", () => {
        if (currentIndex < events.length - 1) {
            currentIndex++;
            updateSlider();
        }
    });

    updateSlider();
}

// Initialize slider only on mobile
window.addEventListener("load", () => {
    if (window.innerWidth <= 768) {
        initMobileEventSlider();
    }
});
